"use strict";$(function(){var e="https://wall.cgcgbcbc.com/",n=[];$.ajax({url:"https://wall.cgcgbcbc.com/api/messages?num=3",type:"get",async:!1,success:function(e){e.forEach(function(n,t){e[t].nickname=twemoji.parse(e[t].nickname),e[t].content=twemoji.parse(e[t].content)}),Array.prototype.push.apply(n,e)}}),$("img.lazy").lazyload({effect:"fadeIn"});var t=new Vue({el:"#container",data:{items:n.reverse()}}),a=new Vue({el:"#admin",data:{item:""}}),c=new Weface,i=0;$("#admin").bind("DOMSubtreeModified",function(){clearTimeout(i),$("#admin").css("display","flex"),i=setTimeout(function(){$("#admin").css("display","none")},1e4)});var o=io.connect(e);o.on("connect",function(){console.log("Connected!")}),o.on("new message",function(e){var n={content:twemoji.parse(c.compile(e.content))||"未接收到消息",nickname:twemoji.parse(e.nickname)||"匿名用户",headimgurl:e.headimgurl||"/images/anonymous.jpg"};t.items.push(n),t.items.length>3&&t.items.shift()}),o.on("admin",function(e){a.item=twemoji.parse(c.compile(e.content))})});